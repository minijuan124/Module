import './polyfills.server.mjs';
import{a as k}from"./chunk-RS5FU5PG.mjs";import{E as u,J as O,K as A,L as I,M as P}from"./chunk-UP3GHGWV.mjs";import{Aa as h,Ea as x,J as f,La as s,Qa as r,Ra as i,S as b,Sa as l,T as v,Vb as _,Wa as C,Ya as p,Za as M,Zb as w,hb as o,jb as y,pc as D,ra as d,va as c,za as m}from"./chunk-IHFNB4MP.mjs";import"./chunk-X2SEQXRR.mjs";var S=(()=>{class a{static \u0275fac=function(n){return new(n||a)};static \u0275mod=h({type:a});static \u0275inj=f({imports:[u,u]})}return a})();function z(a,t){if(a&1){let e=C();r(0,"button",7),p("click",function(){let g=b(e).$implicit,j=M();return v(j.openVision(g))}),o(1),i()}if(a&2){let e=t.$implicit;s("color",e.color),d(),y(" ",e.name," ")}}var F=class a{constructor(t,e){this.router=t;this.auth=e}visions=[{code:2,name:"Visi\xF3n Gerencial",color:"primary",url:"https://powerbi.com/gerencial",icon:"leaderboard"},{code:3,name:"Visi\xF3n Operativa",color:"accent",url:"https://powerbi.com/operativa",icon:"work"},{code:6,name:"Visi\xF3n Financiera",color:"warn",url:"https://powerbi.com/financiera",icon:"account_balance"},{code:7,name:"Alertas Tempranas",color:"warn",url:"https://powerbi.com/alertas",icon:"notification_important"},{code:8,name:"Reportes Ad Hoc",color:"primary",url:"https://app.powerbi.com/links/RqQn5B6v0u?ctid=9c396733-d21f-4657-b0f7-59e01c06818a&pbi_source=linkShare&bookmarkGuid=01a89ea2-ee3a-4297-af7f-5fb19bd64765",icon:"bar_chart"},{code:9,name:"Gesti\xF3n de Usuarios",color:"primary",url:"admin/users",icon:"manage_accounts",adminOnly:!0}];openVision(t){t.url.startsWith("http")?window.open(t.url,"_blank"):this.router.navigate([t.url])}get filteredVisions(){return this.visions.filter(t=>!t.adminOnly||this.isAdmin())}isAdmin(){let t=this.auth.currentUser();return!!t&&t.roles.includes("ADMIN")}logout(){localStorage.removeItem("authToken"),sessionStorage.clear(),this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||a)(c(D),c(k))};static \u0275cmp=m({type:a,selectors:[["app-dashboard"]],decls:10,vars:1,consts:[[1,"dashboard"],[1,"topbar"],["src","/assets/conexus-logo.png","alt","Conexus Logo",1,"logo-left"],[1,"visions"],["mat-raised-button","",3,"color","click",4,"ngFor","ngForOf"],["mat-raised-button","","color","warn",3,"click"],[1,"watermark"],["mat-raised-button","",3,"click","color"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1),l(2,"img",2),r(3,"div",3),x(4,z,2,2,"button",4),r(5,"button",5),p("click",function(){return n.logout()}),r(6,"mat-icon"),o(7,"exit_to_app"),i(),o(8," Salir "),i()()(),l(9,"div",6),i()),e&2&&(d(4),s("ngForOf",n.filteredVisions))},dependencies:[w,_,S,A,O,P,I],styles:['.dashboard[_ngcontent-%COMP%]{position:relative;min-height:100vh;background:linear-gradient(to bottom,#bfe0f4,#d9eef8 35%,#f0f6fb 75%,#fbfdff);color:#1b2b3a;overflow:hidden}.dashboard[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:96px;background:#8fc2e6;opacity:1;box-shadow:0 6px 14px #0000001f;z-index:2;pointer-events:none}.dashboard[_ngcontent-%COMP%]   .topbar[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:space-between;padding:0 28px;height:96px;z-index:3}.dashboard[_ngcontent-%COMP%]   .logo-left[_ngcontent-%COMP%]{height:72px}.dashboard[_ngcontent-%COMP%]   .logo-right[_ngcontent-%COMP%]{position:absolute;bottom:18px;right:18px;height:140px;z-index:3}.dashboard[_ngcontent-%COMP%]   .watermark[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none;z-index:1;flex-direction:column}.dashboard[_ngcontent-%COMP%]   .watermark[_ngcontent-%COMP%]:before{content:"";width:45%;height:70%;background-image:url(/assets/conexus-logo.png);background-repeat:no-repeat;background-position:center;background-size:contain;opacity:30%;filter:saturate(.6) brightness(1.05);display:block}.dashboard[_ngcontent-%COMP%]   .visions[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;z-index:3}.dashboard[_ngcontent-%COMP%]   .visions[_ngcontent-%COMP%]   button[mat-raised-button][_ngcontent-%COMP%]{background:transparent;color:#1b2b3a;border:2px solid rgba(183,146,57,.9);border-radius:8px;padding:10px 18px;box-shadow:none;transition:background .15s ease,color .15s ease}.dashboard[_ngcontent-%COMP%]   .visions[_ngcontent-%COMP%]   button[mat-raised-button][_ngcontent-%COMP%]:hover{background:#b7923914}.dashboard[_ngcontent-%COMP%]   .visions[_ngcontent-%COMP%]{display:flex;gap:12px}.dashboard[_ngcontent-%COMP%]   .visions[_ngcontent-%COMP%]   button[mat-raised-button][_ngcontent-%COMP%]{border-radius:6px;padding:6px 12px;font-size:14px}.dashboard[_ngcontent-%COMP%]   .visions[_ngcontent-%COMP%]   button[color=warn][_ngcontent-%COMP%]:hover{background:#942626!important;color:#fff!important;border-color:#942626!important}']})};export{F as DashboardComponent};
