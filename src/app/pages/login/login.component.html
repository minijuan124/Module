<div class="soft-background" aria-hidden="true">
  <div class="floating-shapes">
    <div class="soft-blob blob-1"></div>
    <div class="soft-blob blob-2"></div>
    <div class="soft-blob blob-3"></div>
    <div class="soft-blob blob-4"></div>
  </div>
</div>

<!-- Split layout: left = form, right = image/promo -->
<div class="login-split">
  <div class="left-panel">
    <div class="soft-card">
      <div class="comfort-header">
        <div class="gentle-logo">
          <div class="logo-circle">
            <img src="assets/conexus-logo.png" alt="Conexus logo" class="conexus-logo" />
            <div class="gentle-glow"></div>
          </div>
        </div>

        <h1 class="comfort-title">Bienvenido a SIGIC</h1>
        <p class="gentle-subtitle">Inicia sesión</p>
      </div>

      <form class="comfort-form" [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
        <div class="soft-field" [class.error]="
            username?.invalid && (username?.touched || username?.dirty)
          ">
          <div class="field-container">
            <input id="email" type="email" formControlName="username" autocomplete="email" placeholder=" " />
            <label for="email">Usuario</label>
            <div class="field-accent"></div>
          </div>
          <span class="gentle-error" *ngIf="username?.invalid && (username?.touched || username?.dirty)">
            <ng-container *ngIf="username?.errors?.['required']">Por favor ingresa tu usuario</ng-container>
            <ng-container *ngIf="username?.errors?.['minlength']">Debe tener al menos 4 caracteres</ng-container>
          </span>
        </div>

        <div class="soft-field" [class.error]="
            password?.invalid && (password?.touched || password?.dirty)
          ">
          <div class="field-container">
            <input id="password" [type]="passwordVisible ? 'text' : 'password'" formControlName="password"
              autocomplete="current-password" placeholder=" " />
            <label for="password">Contraseña</label>
            <button type="button" class="gentle-toggle" (click)="togglePassword()"
              aria-label="Toggle password visibility">
              <div class="toggle-icon">
                <svg *ngIf="!passwordVisible" class="eye-open" width="20" height="20" viewBox="0 0 20 20" fill="none">
                  <path d="M10 3c-4.5 0-8.3 3.8-9 7 .7 3.2 4.5 7 9 7s8.3-3.8 9-7c-.7-3.2-4.5-7-9-7z"
                    stroke="currentColor" stroke-width="1.5" fill="none" />
                  <circle cx="10" cy="10" r="3" stroke="currentColor" stroke-width="1.5" fill="none" />
                </svg>
                <svg *ngIf="passwordVisible" class="eye-closed" width="20" height="20" viewBox="0 0 20 20" fill="none">
                  <path
                    d="M3 3l14 14M8.5 8.5a3 3 0 004 4m2.5-2.5C15 10 12.5 7 10 7c-.5 0-1 .1-1.5.3M10 13c-2.5 0-4.5-2-5-3 .3-.6.7-1.2 1.2-1.7"
                    stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
            </button>
            <div class="field-accent"></div>
          </div>
          <span class="gentle-error" *ngIf="password?.invalid && (password?.touched || password?.dirty)">
            <ng-container *ngIf="password?.errors?.['required']">Por favor ingresa tu contraseña</ng-container>
            <ng-container *ngIf="password?.errors?.['minlength']">La contraseña debe tener al menos 6
              caracteres</ng-container>
          </span>
        </div>

        <div class="comfort-options">
          <label class="gentle-checkbox">
            <input type="checkbox" formControlName="remember" />
            <span class="checkbox-soft">
              <div class="check-circle"></div>
              <svg class="check-mark" width="12" height="10" viewBox="0 0 12 10" fill="none">
                <path d="M1 5l3 3 7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
            </span>
            <span class="checkbox-text">Recuérdame</span>
          </label>
          <a class="comfort-link" href="#">¿Olvidaste tu contraseña?</a>
        </div>

        <button type="button" class="comfort-button" (click)="onSubmit()" [class.loading]="loading"
          [disabled]="loading">
          <div class="button-background"></div>
          <span class="button-text">Iniciar sesión</span>
          <div class="button-loader">
            <div class="gentle-spinner">
              <div class="spinner-circle"></div>
            </div>
          </div>
          <div class="button-glow"></div>
        </button>
      </form>

      <div class="auth-error" *ngIf="loginError">
        <p>{{ loginError }}</p>
      </div>

      <!-- success overlay removed to avoid layout/animation on login -->
    </div>
  </div>

  <div class="right-panel" role="region" aria-label="Información">
    <!-- Replaced image with a scrollable info container. Put any informational text inside .info-box -->
    <div class="info-panel">
      <div class="info-box" tabindex="0">
        
        <!-- Contenedor scrollable solo para los botones -->
<div class="info-tabs-container">
 <button class="scroll-arrow left" (click)="scrollTabs('left')">
    <mat-icon>chevron_left</mat-icon>
  </button>

      <div class="info-tabs-wrapper" #tabsWrapper>
    <nav class="info-tabs">
      <button [class.active]="activeTab === 'all'" (click)="selectTab('all',$event)">Todo</button>
      <button [class.active]="activeTab === 'que-es'" (click)="selectTab('que-es',$event)">¿Qué es SIGIC?</button>
      <button [class.active]="activeTab === 'gerencial'" (click)="selectTab('gerencial',$event)">Visión Gerencial</button>
      <button [class.active]="activeTab === 'operativa'" (click)="selectTab('operativa',$event)">Visión Operativa</button>
      <button [class.active]="activeTab === 'financiera'" (click)="selectTab('financiera',$event)">Visión Financiera</button>
      <button [class.active]="activeTab === 'alertas'" (click)="selectTab('alertas',$event)">Alertas Tempranas</button>
      <button [class.active]="activeTab === 'adhoc'" (click)="selectTab('adhoc',$event)">Reportes AD HOC</button>
    </nav>
  </div>

  <button class="scroll-arrow right" (click)="scrollTabs('right')">
    <mat-icon>chevron_right</mat-icon>
  </button>
</div>



        <!-- Tab content -->
       <div class="tab-content">
  <div class="pdf-image-gallery">
    <img *ngFor="let page of filteredPages" [src]="page.url"  />
  </div>
</div>

      </div>
    </div>
  </div>
</div>