<div class="soft-background" aria-hidden="true">
  <div class="floating-shapes">
    <div class="soft-blob blob-1"></div>
    <div class="soft-blob blob-2"></div>
    <div class="soft-blob blob-3"></div>
    <div class="soft-blob blob-4"></div>
  </div>
</div>

<div class="login-container">
  <div class="soft-card">
    <div class="comfort-header">
      <div class="gentle-logo">
        <div class="logo-circle">
          <!-- use conexus logo image if available in assets -->
          <img src="/assets/conexus-logo.png" alt="Conexus logo" class="conexus-logo" />
          <div class="gentle-glow"></div>
        </div>
      </div>

      <h1 class="comfort-title">Bienvenido a SIGIC</h1>
      <p class="gentle-subtitle">Inicia sesión</p>
    </div>

    <form class="comfort-form" [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
      <div class="soft-field" [class.error]="username?.invalid && (username?.touched || username?.dirty)">
        <div class="field-container">
          <input id="email" type="email" formControlName="username" autocomplete="email" placeholder=" " />
          <label for="email">Usuario</label>
          <div class="field-accent"></div>
        </div>
        <span class="gentle-error" *ngIf="username?.invalid && (username?.touched || username?.dirty)">
          <ng-container *ngIf="username?.errors?.['required']">Por favor ingresa tu usuario</ng-container>
          <ng-container *ngIf="username?.errors?.['minlength']">Debe tener al menos 4 caracteres</ng-container>
        </span>
      </div>

      <div class="soft-field" [class.error]="password?.invalid && (password?.touched || password?.dirty)">
        <div class="field-container">
          <input id="password" [type]="passwordVisible ? 'text' : 'password'" formControlName="password" autocomplete="current-password" placeholder=" " />
          <label for="password">Contraseña</label>
          <button type="button" class="gentle-toggle" (click)="togglePassword()" aria-label="Toggle password visibility">
            <div class="toggle-icon">
              <svg *ngIf="!passwordVisible" class="eye-open" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M10 3c-4.5 0-8.3 3.8-9 7 .7 3.2 4.5 7 9 7s8.3-3.8 9-7c-.7-3.2-4.5-7-9-7z" stroke="currentColor" stroke-width="1.5" fill="none"/>
                <circle cx="10" cy="10" r="3" stroke="currentColor" stroke-width="1.5" fill="none"/>
              </svg>
              <svg *ngIf="passwordVisible" class="eye-closed" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M3 3l14 14M8.5 8.5a3 3 0 004 4m2.5-2.5C15 10 12.5 7 10 7c-.5 0-1 .1-1.5.3M10 13c-2.5 0-4.5-2-5-3 .3-.6.7-1.2 1.2-1.7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </button>
          <div class="field-accent"></div>
        </div>
        <span class="gentle-error" *ngIf="password?.invalid && (password?.touched || password?.dirty)">
          <ng-container *ngIf="password?.errors?.['required']">Por favor ingresa tu contraseña</ng-container>
          <ng-container *ngIf="password?.errors?.['minlength']">La contraseña debe tener al menos 6 caracteres</ng-container>
        </span>
      </div>

      <div class="comfort-options">
        <label class="gentle-checkbox">
          <input type="checkbox" formControlName="remember" />
          <span class="checkbox-soft"><div class="check-circle"></div>
            <svg class="check-mark" width="12" height="10" viewBox="0 0 12 10" fill="none"><path d="M1 5l3 3 7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </span>
          <span class="checkbox-text">Recuérdame</span>
        </label>
        <a class="comfort-link" href="#">¿Olvidaste tu contraseña?</a>
      </div>

      <button type="button" class="comfort-button" (click)="onSubmit()" [class.loading]="loading" [disabled]="loading">
        <div class="button-background"></div>
        <span class="button-text">Iniciar sesión</span>
        <div class="button-loader"><div class="gentle-spinner"><div class="spinner-circle"></div></div></div>
        <div class="button-glow"></div>
      </button>
    </form>

    <div class="auth-error" *ngIf="loginError">
      <p>{{ loginError }}</p>
    </div>

    <!-- <div class="gentle-divider">
      <div class="divider-line"></div>
      <span class="divider-text">or continue with</span>
      <div class="divider-line"></div>
    </div> -->

    <!-- <div class="comfort-social">
      <button type="button" class="social-soft" (click)="socialLogin('Google', $event)">
        <div class="social-background"></div>
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none"><path d="M9 7.4v3.2h4.6c-.2 1-.8 1.8-1.6 2.4v2h2.6c1.5-1.4 2.4-3.4 2.4-5.8 0-.6 0-1.1-.1-1.6H9z" fill="#4285F4"/></svg>
        <span>Google</span>
        <div class="social-glow"></div>
      </button>

      <button type="button" class="social-soft" (click)="socialLogin('Facebook', $event)">
        <div class="social-background"></div>
        <svg width="18" height="18" viewBox="0 0 18 18" fill="#1877F2"><path d="M18 9C18 4.03 13.97 0 9 0S0 4.03 0 9c0 4.49 3.29 8.21 7.59 9v-6.37H5.31V9h2.28V7.02c0-2.25 1.34-3.49 3.39-3.49.98 0 2.01.18 2.01.18v2.21h-1.13c-1.11 0-1.46.69-1.46 1.4V9h2.49l-.4 2.63H10.4V18C14.71 17.21 18 13.49 18 9z"/></svg>
        <span>Facebook</span>
        <div class="social-glow"></div>
      </button>
    </div> -->

    <!-- <div class="comfort-signup">
      <span class="signup-text">Don't have an account?</span>
      <a href="#" class="comfort-link signup-link">Sign up</a>
    </div> -->

    <div class="gentle-success" id="successMessage" [class.show]="showSuccess">
      <div class="success-bloom">
        <div class="bloom-rings">
          <div class="bloom-ring ring-1"></div>
          <div class="bloom-ring ring-2"></div>
          <div class="bloom-ring ring-3"></div>
        </div>
        <div class="success-icon">
          <svg width="28" height="28" viewBox="0 0 28 28" fill="none"><path d="M8 14l5 5 11-11" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </div>
      </div>
      <h3 class="success-title">Welcome!</h3>
      <p class="success-desc">Taking you to your dashboard...</p>
    </div>

  </div>
</div>
